system sh/stop_dnodes.sh
system sh/deploy.sh -n dnode1 -i 1
system sh/exec.sh -n dnode1 -s start
sql connect
sql drop database if exists testa
sql create database testa vgroups 3;
sql use testa;

sql create table sta1(ts timestamp, f int) tags (t int);
sql insert into cta11 using sta1 tags(1) values('2023-10-16 09:10:11', 100111);
sql insert into cta12 using sta1 tags(2) values('2023-10-16 09:10:12', 100112);
sql insert into cta13 using sta1 tags(3) values('2023-10-16 09:10:13', 100113);
sql insert into cta14 using sta1 tags(4) values('2023-10-16 09:10:14', 100114);

sql create table sta2(ts timestamp, f int) tags (t int);
sql insert into cta21 using sta2 tags(1) values('2023-10-16 09:10:11', 100221);
sql insert into cta22 using sta2 tags(2) values('2023-10-16 09:10:12', 100222);
sql insert into cta23 using sta2 tags(3) values('2023-10-16 09:10:13', 100223);
sql insert into cta24 using sta2 tags(4) values('2023-10-16 09:10:14', 100224);

sql drop database if exists testb
sql create database testb vgroups 1;
sql use testb;

sql create table stb1(ts timestamp, f int) tags (t int);
sql insert into ctb11 using stb1 tags(1) values('2023-10-16 09:10:11', 110111);
sql insert into ctb12 using stb1 tags(2) values('2023-10-16 09:10:12', 110112);
sql insert into ctb13 using stb1 tags(3) values('2023-10-16 09:10:13', 110113);
sql insert into ctb14 using stb1 tags(4) values('2023-10-16 09:10:14', 110114);

sql create table stb2(ts timestamp, f int) tags (t int);
sql insert into ctb21 using stb2 tags(1) values('2023-10-16 09:10:11', 110221);
sql insert into ctb22 using stb2 tags(2) values('2023-10-16 09:10:12', 110222);
sql insert into ctb23 using stb2 tags(3) values('2023-10-16 09:10:13', 110223);
sql insert into ctb24 using stb2 tags(4) values('2023-10-16 09:10:14', 110224);

run tsim/view/privilege_view.sim
#run tsim/view/create_drop_view.sim
#run tsim/view/query_view.sim

print ================== restart server to commit data into disk
system sh/exec.sh -n dnode1 -s stop -x SIGINT
system sh/exec.sh -n dnode1 -s start
print ================== server restart completed

run tsim/view/create_drop_view.sim
run tsim/view/query_view.sim

#system sh/exec.sh -n dnode1 -s stop -x SIGINT
